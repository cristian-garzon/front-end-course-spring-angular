<mat-card>
  <mat-card-header>
    <mat-card-title>add students</mat-card-title>
    <mat-card-subtitle *ngIf="course"
      >course: {{ course.name }}</mat-card-subtitle
    >
  </mat-card-header>
  <mat-card-content>
    <mat-form-field
      class="example-full-width bg-dark text-light"
      appearance="fill"
    >
      <mat-label class="mx-3">name student</mat-label>
      <input matInput placeholder="name" class="width" (keyup)="filter($event)" />
    </mat-form-field>
    <table
      mat-table
      [dataSource]="studentSelected"
      matSort
      class="mat-elevation-z8 width"
    >
      <ng-container matColumnDef="checkbox">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-checkbox 
            (change)="$event ? selectAll() : null"
            [checked]="selectStudents.hasValue() && allSelect()"
            [indeterminated]="selectStudents.hasValue() && !allSelect"
          ></mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let student">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selectStudents.toggle(student) : null"
            [checked]="selectStudents.isSelected(student)"
          ></mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
        <td mat-cell *matCellDef="let student">{{ student.name }}</td>
      </ng-container>

      <ng-container matColumnDef="surname">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Surname</th>
        <td mat-cell *matCellDef="let student">{{ student.surname }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="column"></tr>
      <tr
        mat-row
        *matRowDef="let student; columns: column"
        (click)="studentSelected.toggle(student)"
      ></tr>
    </table>
    <button
      mat-stroked-button
      color="primary"
      class="bg-dark my-2"
      (click)="addStudents()"
      [disabled]="!selectStudents.hasValue()"
    >
      add students
    </button>
  </mat-card-content>
</mat-card>
